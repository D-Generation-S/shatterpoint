[gd_scene load_steps=32 format=3 uid="uid://3wauxg2sw8r3"]

[ext_resource type="Script" path="res://src/game/build_mode/build_menu/build_menu.gd" id="1_1d5ep"]
[ext_resource type="Script" path="res://src/game/build_mode/build_menu/build_menu_group.gd" id="2_pqfs5"]
[ext_resource type="PackedScene" uid="uid://0jl35wrlytvr" path="res://scenes/game/overlay/build_menu/build_menu_group_template.tscn" id="3_kjgpy"]
[ext_resource type="Script" path="res://src/game/build_mode/build_menu/build_menu_entry.gd" id="3_sn81m"]
[ext_resource type="Texture2D" uid="uid://c5u4k3mgqiqts" path="res://assets/atlast_textures/scrap.tres" id="4_1kyfe"]
[ext_resource type="Script" path="res://src/game/build_mode/tools/building_construction.gd" id="4_okk5k"]
[ext_resource type="Resource" uid="uid://ctrcr440rcqre" path="res://assets/resources/towers/base_tower.tres" id="4_pkj5e"]
[ext_resource type="Script" path="res://src/game/build_mode/tools/destroy_building.gd" id="5_f5t10"]
[ext_resource type="Texture2D" uid="uid://h8sbbxloewf4" path="res://assets/textures/wave-breaker-items.png" id="5_i4ii2"]
[ext_resource type="PackedScene" uid="uid://d2ccdfwya86u4" path="res://scenes/game/templates/TowerTemplate.tscn" id="5_mwrl7"]
[ext_resource type="Script" path="res://src/game/build_mode/build_validators/build_validator.gd" id="6_ajb40"]
[ext_resource type="Texture2D" uid="uid://bol2qkole2koo" path="res://assets/atlast_textures/hammer.tres" id="6_kkt7x"]
[ext_resource type="Script" path="res://src/game/build_mode/build_validators/resource_build_validator.gd" id="6_ritxv"]
[ext_resource type="Script" path="res://src/game/build_mode/build_validators/inside_of_build_area.gd" id="7_8harp"]
[ext_resource type="Script" path="res://src/game/overlay/animation/slide_animation.gd" id="7_c6k3j"]
[ext_resource type="Script" path="res://src/game/build_mode/build_validators/build_space_blocked.gd" id="7_lq41d"]
[ext_resource type="Script" path="res://src/game/build_mode/build_validators/check_tile_map_collision.gd" id="9_jv6oy"]
[ext_resource type="Texture2D" uid="uid://c2avbyuivc0ce" path="res://assets/atlast_textures/gray_tower.tres" id="10_d6xds"]
[ext_resource type="Script" path="res://src/game/overlay/animation/texture_button_modulate.gd" id="18_h6d7i"]

[sub_resource type="Resource" id="Resource_fruxs"]
script = ExtResource("6_ritxv")

[sub_resource type="Resource" id="Resource_g4gv6"]
script = ExtResource("7_8harp")
build_area_group = "build_area"

[sub_resource type="Resource" id="Resource_2momy"]
script = ExtResource("7_lq41d")
building_group = "building"
reverse = false

[sub_resource type="Resource" id="Resource_jeql6"]
script = ExtResource("9_jv6oy")
tile_map_group = "obstracles"

[sub_resource type="Resource" id="Resource_fdhli"]
script = ExtResource("4_okk5k")
building_template = ExtResource("5_mwrl7")
building_group = "building"
validators = Array[ExtResource("6_ajb40")]([SubResource("Resource_fruxs"), SubResource("Resource_g4gv6"), SubResource("Resource_2momy"), SubResource("Resource_jeql6")])
use_build_entry_icon_as_ghost = true
building_data = ExtResource("4_pkj5e")

[sub_resource type="Resource" id="Resource_wrl4v"]
script = ExtResource("3_sn81m")
building_data = SubResource("Resource_fdhli")
name = "BASIC_TOWER"
icon = ExtResource("10_d6xds")

[sub_resource type="Resource" id="Resource_cpqmy"]
script = ExtResource("2_pqfs5")
name = "TOWERS"
icon = ExtResource("10_d6xds")
entries = Array[ExtResource("3_sn81m")]([SubResource("Resource_wrl4v")])

[sub_resource type="Resource" id="Resource_g7khr"]
script = ExtResource("7_lq41d")
building_group = "building"
reverse = true

[sub_resource type="Resource" id="Resource_r3thl"]
script = ExtResource("5_f5t10")
validators = Array[ExtResource("6_ajb40")]([SubResource("Resource_g7khr")])
use_build_entry_icon_as_ghost = true

[sub_resource type="AtlasTexture" id="AtlasTexture_8xbuw"]
atlas = ExtResource("5_i4ii2")
region = Rect2(16, 36, 16, 10)

[sub_resource type="Resource" id="Resource_nuq1m"]
script = ExtResource("3_sn81m")
building_data = SubResource("Resource_r3thl")
name = "BULLDOZER"
icon = SubResource("AtlasTexture_8xbuw")

[sub_resource type="Resource" id="Resource_gph8e"]
script = ExtResource("2_pqfs5")
name = "TOOLS"
icon = ExtResource("4_1kyfe")
entries = Array[ExtResource("3_sn81m")]([SubResource("Resource_nuq1m")])

[node name="BuildMenu" type="CanvasLayer"]
script = ExtResource("1_1d5ep")
_menu_data = Array[ExtResource("2_pqfs5")]([SubResource("Resource_cpqmy"), SubResource("Resource_gph8e")])
build_group_template = ExtResource("3_kjgpy")

[node name="HBoxContainer" type="HBoxContainer" parent="."]
anchors_preset = 2
anchor_top = 1.0
anchor_bottom = 1.0
offset_top = -128.0
offset_right = 132.0
grow_vertical = 0

[node name="StartButton" type="PanelContainer" parent="HBoxContainer"]
layout_mode = 2

[node name="TextureButton" type="TextureButton" parent="HBoxContainer/StartButton"]
custom_minimum_size = Vector2(128, 128)
layout_mode = 2
size_flags_vertical = 8
mouse_filter = 1
texture_normal = ExtResource("6_kkt7x")
stretch_mode = 5
script = ExtResource("18_h6d7i")
hover_color = Color(0.286275, 0.286275, 0.286275, 1)

[node name="Groups" type="HBoxContainer" parent="HBoxContainer"]
unique_name_in_owner = true
layout_mode = 2
size_flags_vertical = 8
script = ExtResource("7_c6k3j")

[node name="ExitTimer" type="Timer" parent="."]
unique_name_in_owner = true
wait_time = 0.2
one_shot = true

[connection signal="build_mode_close" from="." to="HBoxContainer/Groups" method="slide_out"]
[connection signal="build_mode_open" from="." to="HBoxContainer/Groups" method="slide_in"]
[connection signal="mouse_entered" from="HBoxContainer/StartButton" to="." method="hover_enter"]
[connection signal="mouse_exited" from="HBoxContainer/StartButton" to="." method="hover_exit"]
[connection signal="pressed" from="HBoxContainer/StartButton/TextureButton" to="." method="was_pressed"]
[connection signal="mouse_entered" from="HBoxContainer/Groups" to="." method="hover_enter"]
[connection signal="mouse_exited" from="HBoxContainer/Groups" to="." method="hover_exit"]
